<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bingo</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; background-color: #f4f4f4; }
        h1 { color: #333; }
        .bingo-container { display: flex; flex-direction: column; align-items: center; margin-top: 20px; }
        .bingo-card { display: grid; grid-template-columns: repeat(9, 60px); gap: 5px; padding: 15px; background: powderblue; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.2); }
        .cell { width: 60px; height: 60px; display: flex; align-items: center; justify-content: center; border: 2px solid #333; font-size: 24px; font-weight: bold; background-color: #fff; border-radius: 5px; }
        .marked { background-color: #ffcc00; color: white; border-color: #ff9900; }
        button { margin-top: 20px; font-size: 18px; padding: 12px 20px; border: none; background-color: #007bff; color: white; border-radius: 5px; cursor: pointer; transition: 0.3s; }
        button:hover { background-color: #0056b3; }
        #drawnNumber { font-size: 20px; font-weight: bold; margin-top: 15px; }
    </style>
</head>
<body>
    <h1>Juego de Bingo</h1>
    <div class="bingo-container">
        <button onclick="generateNewCard()">Generar Nuevo Cartón</button>
        <div class="bingo-card" id="bingoCard"></div>
        <button onclick="drawNumber()">Generar Número</button>
        <p id="drawnNumber"></p>
    </div>

    <script>
        var drawnNumbers = new Set(); // Conjunto para almacenar los números sorteados
        var bingoCard = []; // Arreglo para guardar las celdas del cartón
        const cardElement = document.getElementById('bingoCard');
        const drawnNumberElement = document.getElementById('drawnNumber');
        
        // Función para generar un nuevo cartón de bingo
        function generateNewCard() {
            cardElement.innerHTML = "";
            drawnNumbers.clear();
            drawnNumberElement.textContent = "";
            bingoCard = [];
            generateBingoCard();
        }

        // Función para generar un cartón de bingo de 3 filas x 9 columnas
        function generateBingoCard() {
            var rows = 3, cols = 9;
            var cardNumbers = Array.from({ length: cols }, (_, i) => generateUniqueNumbers(i * 10 + 1, (i + 1) * 10, 3));
            
            for (var row = 0; row < rows; row++) {
                for (var col = 0; col < cols; col++) {
                    var cell = document.createElement('div');
                    cell.classList.add('cell');
                    if (cardNumbers[col][row] !== undefined) {
                        cell.textContent = cardNumbers[col][row];
                    } else {
                        cell.textContent = ""; // Celda vacía
                    }
                    bingoCard.push(cell);
                    cardElement.appendChild(cell);
                }
            }
        }
        
        // Función para generar números únicos dentro de un rango
        function generateUniqueNumbers(min, max, count) {
            var numbers = new Set();
            while (numbers.size < count) {
                numbers.add(Math.floor(Math.random() * (max - min + 1)) + min);
            }
            return [...numbers];
        }
        
        // Función para generar un número aleatorio no repetido
        function drawNumber() {
            if (drawnNumbers.size === 90) {
                drawnNumberElement.textContent = "¡Todos los números han sido sorteados!";
                return;
            }
            
            var number;
            do {
                number = Math.floor(Math.random() * 90) + 1;
            } while (drawnNumbers.has(number));
            
            drawnNumbers.add(number);
            drawnNumberElement.textContent = `Número generado: ${number}`;
            markNumber(number);
            
            // Verificar si el cartón está completo
            if (isCardComplete()) {
                drawnNumberElement.textContent = "¡Bingo! El cartón está completo.";
            }
        }
        
        // Función para marcar un número en el cartón si está presente
        function markNumber(number) {
            bingoCard.forEach(cell => {
                if (cell.textContent == number) {
                    cell.classList.add('marked');
                }
            });
        }
        
        // Función para verificar si el cartón está completamente marcado
        function isCardComplete() {
            return bingoCard.every(cell => cell.textContent === "" || cell.classList.contains('marked'));
        }
        
        generateBingoCard(); // Generar un cartón al cargar la página
    </script>
</body>
</html>
